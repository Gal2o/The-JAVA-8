# μ• λ…Έν…μ΄μ…κ³Ό λ¦¬ν”λ ‰μ…
  - ## μ¤‘μ” μ• λ…Έν…μ΄μ…
    - ### @Retention : ν•΄λ‹Ή μ• λ…Έν…μ΄μ…μ„ μ–Έμ κΉμ§€ μ μ§€ν•  κ²ƒμΈκ°€? β΅ μ†μ¤, ν΄λμ¤, λ°νƒ€μ„
      ```java 
        // μ΅°νκ°€ μ•λλ‹¤. μ΄μ λ”?
        Arrays.stream(Book.class.getAnnotations()).forEach(System.out::println);
      ```
      - #### β€Ό κΈ°λ³Έμ μΌλ΅ μ• λ…Έν…μ΄μ…μ€ μ£Όμ„κ³Ό λΉ„μ·ν• μ·¨κΈ‰μ„ λ°›λ”λ‹¤ <br><br> λ°”μ΄νΈμ½”λ“λ¥Ό λ΅λ”©ν–μ„ λ•, μ• λ…Έν…μ΄μ…μ€ λ©”λ¨λ¦¬μ— μ½μ–΄μ¤μ§€ μ•λ”λ‹¤.
      ``` java
          @Retention(RetentionPolicy.RUNTIME)
          public @interface MyAnnotation {
           // MyAnnotationμ΄λΌλ” μ• λ…Έν…μ΄μ… λ§λ“¤κΈ°
          }
      ```
      - #### `@Retention(RetentionPolicy.RUNTIME)` λ¥Ό μ¶”κ°€ν•κ³  `javap -c -v .classνμΌκ²½λ΅` λ¥Ό ν•΄λ³΄λ©΄
      ``` java
          // μ΄λ ‡κ² λ°νƒ€μ„μ— λ³Ό μ μλ” μ• λ…Έν…μ΄μ… μ •λ³΄λ¥Ό λ³΄μ—¬μ¤€λ‹¤.
          RuntimeVisibleAnnotations:
            0: #39()
              com.example.thjavacode.MyAnnotation
      ```
      ``` java
          // λν• getAnnotation() μ΅°νκ°€ κ°€λ¥ν•λ‹¤
          public class Annotation {
            public static void main(String[] args) {
                Arrays.stream(Book.class.getAnnotations()).forEach(System.out::println);
            }
          }
      ```
      - #### κ²°κ³Ό
      ``` java
          @com.example.thejavacode.MyAnnotation()
      ```
    ---------
    - ### @Target : μ–΄λ””μ— μ‚¬μ©ν•  μ μλ”κ°€? β΅ μ• λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•  μ μλ” μ„μΉ
    ``` java
        // TYPEκ³Ό FIELDμ—λ§ μ• λ…Έν…μ΄μ…μ„ λ¶™ν μ μκ² ν•λ©΄
        @Retention(RetentionPolicy.RUNTIME)
        @Target({ElementType.TYPE, ElementType.FIELD})
        public @interface MyAnnotation {
        }
    ```
    - #### κ²°κ³Ό <br><br> ![image](https://user-images.githubusercontent.com/35948339/135488215-9b7cce70-d4cc-40f0-b405-e965234c723b.png) <br><br> π“ μƒμ„±μμ—λ” μ»΄νμΌ μ—λ¬κ°€ λ‚μ§€λ§, ν•„λ“μ—λ” λ‚μ§€ μ•λ”λ‹¤
    ----------
    - ### μ• λ…Έν…μ΄μ…μ— κ°’ μ£ΌκΈ°
      - #### μ• λ…Έν…μ΄μ…μ€ κ°’λ“¤μ„ κ°€μ§ μ μλ”λ° ν”„λ¦¬λ―Έν‹°λΈ νƒ€μ…, λ νΌλ°μ¤ νƒ€μ…λ§ κ°€μ§ μ μλ‹¤
      - #### 1οΈβƒ£ μ²« λ²μ§Έ λ°©λ²•
      ``` java
          @Retention(RetentionPolicy.RUNTIME)
          @Target({ElementType.TYPE, ElementType.FIELD})
          public @interface MyAnnotation {
          
            // ν”„λ¦¬λ―Έν‹°λΈ, λ νΌλ°μ¤ νƒ€μ…μ— defaultλ΅ κ°’ μ£ΌκΈ°
            String name() default "Mac2";
          
            int number() default 100;
          }
      ```
      - #### 2οΈβƒ£ λ‘ λ²μ§Έ λ°©λ²•
      ``` java
          public @interface MyAnnotation {
              String name();
          
              int number();
          }
        
          // defaultμΌλ΅ μ£Όμ§€ μ•λ”λ‹¤λ©΄, λ”°λ΅ κ°’μ„ μ¤μ•Ό ν•λ‹¤
          @MyAnnotation(name = "Mac2", number = 100)
          public class Book {
          }
      ```
    ----------
    - ### @Inherit : ν•΄λ‹Ή μ• λ…Έν…μ΄μ…μ„ ν•μ„ ν΄λμ¤κΉμ§€ μ „λ‹¬ν•  κ²ƒμΈκ°€ ?
    ``` java
        @Retention(RetentionPolicy.RUNTIME)
        @Inherited
        public @interface MyAnnotation {
          // MyAnnotationμ΄λΌλ” μ• λ…Έν…μ΄μ… λ§λ“¤κΈ°
        }
    ```
    -----------
    - ### getAnnotations() : μƒμ†λ°›μ€ (@Inherit) μ• λ…Έν…μ΄μ…κΉμ§€ μ΅°ν
    ``` java
        // Bookμ„ μƒμ†λ°›μ€ MyBookμ—μ„ getAnnotation()μ„ μ‚¬μ©ν•λ©΄ μƒμ„ ν΄λμ¤μΈ Bookμ Annotationμ„ κ°€μ Έμ¨λ‹¤
        public class Annotation {
          public static void main(String[] args) {
              Arrays.stream(MyBook.class.getAnnotations()).forEach(System.out::println);
          }
        }
    ```
    - #### κ²°κ³Ό
    ```
      @com.example.thejavacode.MyAnnotation(name="Mac2", number=100)
    ```
    ----------
    - ### getDeclaredAnnotations() : μƒμ†λ°›μ€ κ²ƒ μ μ™Έν•κ³  μκΈ° μμ‹ μ—λ§ λ¶™μ–΄μλ” μ• λ…Έν…μ΄μ… μ΅°ν
      - #### β€Ό μƒμ„ ν΄λμ¤μ μ• λ…Έν…μ΄μ…κ³Ό κ°™μ€ μ΄λ¦„μ„ μ“°λ©΄, μƒμ„ ν΄λμ¤λ¥Ό μ°μ„ μΌλ΅ κ°€μ Έμ¤λ―€λ΅ μ΄λ¦„μ΄ λ‹¬λΌμ•Ό ν•λ‹¤
    ``` java
        // MyBookμ— λ¶™ν μƒλ΅μ΄ μ–΄λ…Έν…μ΄μ…
        @Retention(RetentionPolicy.RUNTIME)
        @Inherited
        public @interface SecondAnnotation {
          String name() default "Second Mac2";
        }

        // MyBookμ— μƒλ΅μ΄ μ–΄λ…Έν…μ΄μ… μ„¤μ •
        @SecondAnnotation
        public class MyBook extends Book implements Myinterface {
        }
    ```
    - #### κ²°κ³Ό
    ``` java
        Arrays.stream(MyBook.class.getAnnotations()).forEach(System.out::println);
      
        =>
        @com.example.thejavacode.MyAnnotation(name="Mac2", number=100)
        @com.example.thejavacode.SecondAnnotation(name="Second Mac2")
      
        Arrays.stream(MyBook.class.getDeclaredAnnotations()).forEach(System.out::println);
      
        => // μκΈ° κ²ƒλ§ κ°€μ Έμ¨λ‹¤
        @com.example.thejavacode.SecondAnnotation(name="Second Mac2")
    ```
    ------------
    - ### getDeclaredFields() : ν•„λ“μ— λ¶™μ–΄μλ” μ• λ…Έν…μ΄μ…μ„ κ°€μ Έμ¬ μ μλ‹¤.
    - #### Book.java
    ``` java
        // μ΄λ ‡κ² ν•„λ“μ— μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ–΄μμ„λ•,
        @MyAnnotation
        private String d = "d";

        @SecondAnnotation
        protected String e = "e";
    ```
    ``` java
        Arrays.stream(Book.class.getDeclaredFields()).forEach(f -> {
            Arrays.stream(f.getAnnotations()).forEach(System.out::println);
        });
    ```
    - #### κ²°κ³Ό
    ``` java
        @com.example.thejavacode.MyAnnotation(name="Mac2", number=100)
        @com.example.thejavacode.SecondAnnotation(name="Second Mac2")
    ```
    ---------
    - ### ν•„λ“μ— λ¶™μ€ μ• λ…Έν…μ΄μ…μ— μ£Όμ–΄μ§„ κ°’μ„ κΊΌλ‚΄μ„ μ°Έμ΅°ν•κΈ°
    ``` java
        Arrays.stream(Book.class.getDeclaredFields()).forEach(f -> {
            Arrays.stream(f.getAnnotations()).forEach(a -> {
                // μ• λ…Έν…μ΄μ…μ€ μΈμ¤ν„΄μ¤ νƒ€μ…μ΄λ―€λ΅ μΊμ¤ν…μ„ ν•΄μ¤€λ‹¤
                if (a instanceof MyAnnotation) {
                    MyAnnotation myAnnotation = (MyAnnotation) a;
                    System.out.println(myAnnotation.name());
                    System.out.println(myAnnotation.number());
                }

                if(a instanceof SecondAnnotation) {
                    SecondAnnotation secondAnnotation = (SecondAnnotation) a;
                    System.out.println(secondAnnotation.name());
                }
            });
        });
    ```
    - #### κ²°κ³Ό
    ```
      Mac2
      100
      Second Mac2
    ```
  
